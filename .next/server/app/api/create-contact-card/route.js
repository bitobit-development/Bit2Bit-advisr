"use strict";(()=>{var e={};e.id=1237,e.ids=[1237],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},4450:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>$,staticGenerationAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{POST:()=>d});var n=r(49303),o=r(88716),s=r(60670),c=r(92048),i=r.n(c),u=r(55315),p=r.n(u);async function d(e){try{let{name:t,surname:r,email:a,mobile:n,isDiscoveryCustomer:o,hasVitality:s,products:c,consent:u,phoneType:d="iphone"}=await e.json(),l=`${t} ${r}`,m=[`Discovery Customer: ${o}`,`Has Vitality: ${s}`,`Products: ${c.join(", ")}`,`Consent given: ${u}`],v=["BEGIN:VCARD","VERSION:3.0",`N:${r};${t};;;`,`FN:${l}`,a?`EMAIL;TYPE=INTERNET:${a}`:null,`TEL;TYPE=CELL:${n}`,`X-PHONETYPE:${d}`,`NOTE:${m.join(" | ")}`,"END:VCARD"].filter(Boolean).join("\r\n"),$=p().join(process.cwd(),"app","vcards");i().existsSync($)||i().mkdirSync($,{recursive:!0});let h=`${t}_${r}.vcf`,x=p().join($,h);return i().writeFileSync(x,v,"utf8"),new Response(v,{status:200,headers:{"Content-Type":"text/vcard; charset=utf-8","Content-Disposition":`attachment; filename="${h}"`}})}catch(e){return console.error("Create contact card error:",e),new Response(JSON.stringify({success:!1,message:"Invalid request"}),{status:400})}}let l=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/create-contact-card/route",pathname:"/api/create-contact-card",filename:"route",bundlePath:"app/api/create-contact-card/route"},resolvedPagePath:"/home/runner/workspace/app/api/create-contact-card/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:$}=l,h="/api/create-contact-card/route";function x(){return(0,s.patchFetch)({serverHooks:$,staticGenerationAsyncStorage:v})}},49303:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948],()=>r(4450));module.exports=a})();