"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/send-vitality-email/route";
exports.ids = ["app/api/send-vitality-email/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:http":
/*!****************************!*\
  !*** external "node:http" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:http");

/***/ }),

/***/ "node:https":
/*!*****************************!*\
  !*** external "node:https" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node:https");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:path");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("node:process");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "node:zlib":
/*!****************************!*\
  !*** external "node:zlib" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsend-vitality-email%2Froute&page=%2Fapi%2Fsend-vitality-email%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsend-vitality-email%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsend-vitality-email%2Froute&page=%2Fapi%2Fsend-vitality-email%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsend-vitality-email%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_send_vitality_email_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/send-vitality-email/route.ts */ \"(rsc)/./app/api/send-vitality-email/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/send-vitality-email/route\",\n        pathname: \"/api/send-vitality-email\",\n        filename: \"route\",\n        bundlePath: \"app/api/send-vitality-email/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/send-vitality-email/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_send_vitality_email_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/send-vitality-email/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzZW5kLXZpdGFsaXR5LWVtYWlsJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzZW5kLXZpdGFsaXR5LWVtYWlsJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2VuZC12aXRhbGl0eS1lbWFpbCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDVztBQUN4RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy0xMy1yZXBsaXQvPzI1OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL2hvbWUvcnVubmVyL3dvcmtzcGFjZS9hcHAvYXBpL3NlbmQtdml0YWxpdHktZW1haWwvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwic3RhbmRhbG9uZVwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zZW5kLXZpdGFsaXR5LWVtYWlsL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VuZC12aXRhbGl0eS1lbWFpbFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc2VuZC12aXRhbGl0eS1lbWFpbC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvYXBwL2FwaS9zZW5kLXZpdGFsaXR5LWVtYWlsL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zZW5kLXZpdGFsaXR5LWVtYWlsL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsend-vitality-email%2Froute&page=%2Fapi%2Fsend-vitality-email%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsend-vitality-email%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/send-vitality-email/route.ts":
/*!**********************************************!*\
  !*** ./app/api/send-vitality-email/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _lib_send_grapgh_email__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/send-grapgh-email */ \"(rsc)/./lib/send-grapgh-email.ts\");\n/* harmony import */ var _lib_emailDisclaimer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/emailDisclaimer */ \"(rsc)/./lib/emailDisclaimer.ts\");\n/* harmony import */ var _lib_carla_prinsloo_text__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/carla-prinsloo-text */ \"(rsc)/./lib/carla-prinsloo-text.ts\");\n// app/api/send-vitality-email/route.ts\n\n\n\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_6__.OpenAI({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(req) {\n    try {\n        const { to, name, DiscoveryCustomer, hasVitality, leadNumber } = await req.json();\n        if (!to || !name || DiscoveryCustomer === undefined || hasVitality === undefined || leadNumber === undefined) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing required fields: to, name, DiscoveryCustomer, or hasVitality, leadNumber \"\n            }, {\n                status: 400\n            });\n        }\n        // 1) Load the HTML template\n        const templatePath = path__WEBPACK_IMPORTED_MODULE_2___default().resolve(\"./lib/templates/vitality-email-template.html\");\n        let htmlTemplate = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(templatePath, \"utf-8\");\n        // 2) Determine subject\n        const subject = hasVitality ? `${name}, Your Confirmation for the Vitality Wellness Day Event!` : `${name} ,Discover Vitality and Join Our Wellness Day Event!`;\n        // 3) Build prompt for AI\n        const prompt = `\n    You are a content marketing specialist writing HTML body content for Discovery Vitality Wellness Day email campaigns.\n\n    You will generate a short and friendly email message in basic HTML format (using only <p>, <strong>, <ul>, and <a> tags) that gets inserted into a styled email template. You do not need to add styles, headers, or layout — this is done separately by the system.\n\n    PARAMETERS:\n    * Name: ${name}\n    * Registration reference number: ${leadNumber}\n    * Discovery customer: ${DiscoveryCustomer}\n    * Vitality member: ${hasVitality}\n    * Carla’s profile: ${_lib_carla_prinsloo_text__WEBPACK_IMPORTED_MODULE_5__.carlaPrinslooText}\n\n    OBJECTIVE:\n    Write a personalized thank-you message to users who registered for an upcoming Vitality Wellness Day organized by Discovery’s financial advisor, Carla Prinsloo.\n\n    Your goal is to:\n    * Thank them for registering\n    * Encourage Discovery + Vitality activation if they’re not members\n    * Highlight 2–4 core benefits from the brochure (briefly)\n    * Introduce and mention Carla as their potential financial advisor and emphasize her skills and experience\n    * End with a warm sign-off: Carla Prinsloo and Discovery Vitality team\n\n    SCENARIO LOGIC:\n\n    If ${DiscoveryCustomer} === true and ${hasVitality} === true:\n    * Thank them for registering\n    * Mention reference number: <strong>${leadNumber}</strong>\n    * Acknowledge they’re fully eligible and can earn points through participation\n    * Invite them to attend the Wellness \n    * Mention that <strong style=\"color: #eb2660;\">Carla Prinsloo</strong> is available to help enhance their wellness and financial strategy\n\n    If ${DiscoveryCustomer} === true and ${hasVitality} === false:\n    * Thank them for registering\n    * Acknowledge they are a Discovery customer but not yet Vitality\n    * Encourage them to activate Vitality to unlock lifestyle rewards\n    * Mention a few benefits (example: gym, healthy food, flights)\n    * Invite them to attend the Wellness Day \n    * Recommend connecting with <strong style=\"color: #eb2660;\">Carla Prinsloo</strong> for onboarding\n\n    If ${DiscoveryCustomer} === false:\n    * Thank them for registering\n    * Mention they are not a Discovery customer yet\n    * Invite them to join Discovery first, then activate Vitality\n    * Mention top lifestyle benefits\n    * Encourage reaching out to <strong style=\"color: #eb2660;\">Carla Prinsloo</strong> for assistance\n    * Reinforce participation in the upcoming Wellness Day\n\n    DO NOT:\n    * Include any <html>, <head>, or <style> tags\n    * Add your own layout elements — just raw HTML body content\n    * Add new lines around Carla’s name — it should be inline\n\n    Carla’s Name Format:\n    Use this inline format: <strong style=\"color: #eb2660;\">Carla Prinsloo</strong>\n\n    TONE & FORMAT:\n    * Professional and friendly\n    * Keep it short: 4–6 sentences max\n    * HTML content only\n    * Return only what will go inside the body placeholder\n    `.trim();\n        // 4) Generate body via OpenAI\n        const aiRes = await openai.chat.completions.create({\n            model: \"gpt-4\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are a content marketing specialist writing vibrant, on-brand emails for Discovery Vitality.\"\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.7\n        });\n        const aiBody = aiRes.choices[0].message?.content?.trim() ?? \"\";\n        // 4.1) Throw error if AI failed to generate body\n        if (!aiBody) {\n            throw new Error(\"AI generation error: empty email body\");\n        }\n        // 5) Inject placeholders into template\n        try {\n            const iconPath = (icon)=>fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(`lib/icons/base64/${icon}.svg.txt`, \"utf-8\").replace(/\\s+/g, \"\");\n            const vitality_logo = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(`lib/images/base64/Vitality-Pink-logo.png.txt`, \"utf-8\").replace(/\\s+/g, \"\");\n            const disc_bullet = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(`lib/images/base64/disc-bullet-point.png.txt`, \"utf-8\").replace(/\\s+/g, \"\");\n            const download_icon = iconPath(\"download\"); // ← added\n            const domain = \"http://bit-2-leads.replit.app\"; // ← added\n            const vitality_logo_disc = \"Vitality-Pink-logo-disc.png\";\n            htmlTemplate = htmlTemplate.replace(/{{image_disc_bullet}}/g, disc_bullet).replace(/{{image_vitality}}/g, vitality_logo).replace(/{{header}}/g, subject).replace(/{{body}}/g, aiBody).replace(/{{disclaimer}}/g, _lib_emailDisclaimer__WEBPACK_IMPORTED_MODULE_4__.emailDisclaimer).replace(/{{domain}}/g, domain) // ← added\n            .replace(/{{image_vitality_disc}}/g, vitality_logo_disc).replace(/{{icon_user}}/g, iconPath(\"user\")).replace(/{{icon_briefcase}}/g, iconPath(\"briefcase\")).replace(/{{icon_phone}}/g, iconPath(\"phone\")).replace(/{{icon_mail}}/g, iconPath(\"mail\")).replace(/{{icon_globe}}/g, iconPath(\"globe\")).replace(/{{icon_building}}/g, iconPath(\"building\")).replace(/{{icon_download}}/g, download_icon); // ← added\n            // Verify injection\n            if (htmlTemplate.includes(\"{{\") || htmlTemplate.includes(\"}}\")) {\n                throw new Error(\"Placeholder injection incomplete\");\n            }\n        } catch (e) {\n            throw new Error(`Template injection error: ${e.message}`);\n        }\n        // log-the email\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(`./debug-output/${leadNumber}.html`, htmlTemplate);\n        // 6) Attach the brochure\n        const attachmentPath = path__WEBPACK_IMPORTED_MODULE_2___default().resolve(\"./public/vitality-brochures/vitality-2025-brochure.pdf\");\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(attachmentPath)) {\n            throw new Error(`Attachment not found at ${attachmentPath}`);\n        }\n        // 7) Send email\n        const mailResult = await (0,_lib_send_grapgh_email__WEBPACK_IMPORTED_MODULE_3__.sendGraphEmail)({\n            to,\n            subject,\n            html: htmlTemplate,\n            attachmentPath\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(mailResult);\n    } catch (error) {\n        console.error(\"send-vitality-email error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NlbmQtdml0YWxpdHktZW1haWwvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLHVDQUF1QztBQUVpQjtBQUNwQztBQUNJO0FBQ1E7QUFDeUI7QUFDRDtBQUNNO0FBRTlELE1BQU1PLFNBQVMsSUFBSUosMENBQU1BLENBQUM7SUFBRUssUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxjQUFjO0FBQUM7QUFFeEQsZUFBZUMsS0FBS0MsR0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU0sRUFBRUMsRUFBRSxFQUFFQyxJQUFJLEVBQUVDLGlCQUFpQixFQUFFQyxXQUFXLEVBQUVDLFVBQVUsRUFBRSxHQUFHLE1BQU1MLElBQUlNLElBQUk7UUFDL0UsSUFBSSxDQUFDTCxNQUFNLENBQUNDLFFBQVFDLHNCQUFzQkksYUFBYUgsZ0JBQWdCRyxhQUFhRixlQUFlRSxXQUFXO1lBQzVHLE9BQU9wQixxREFBWUEsQ0FBQ21CLElBQUksQ0FDdEI7Z0JBQUVFLFNBQVM7Z0JBQU9DLE9BQU87WUFBb0YsR0FDN0c7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNQyxlQUFldEIsbURBQVksQ0FBQztRQUNsQyxJQUFJd0IsZUFBZXpCLHNEQUFlLENBQUN1QixjQUFjO1FBRWpELHVCQUF1QjtRQUN2QixNQUFNSSxVQUFVWCxjQUNaLENBQUMsRUFBRUYsS0FBSyx3REFBd0QsQ0FBQyxHQUNqRSxDQUFDLEVBQUVBLEtBQUssb0RBQW9ELENBQUM7UUFFakUseUJBQXlCO1FBQ3pCLE1BQU1jLFNBQVMsQ0FBQzs7Ozs7O1lBTVIsRUFBRWQsS0FBSztxQ0FDa0IsRUFBRUcsV0FBVzswQkFDeEIsRUFBRUYsa0JBQWtCO3VCQUN2QixFQUFFQyxZQUFZO3VCQUNkLEVBQUVYLHVFQUFpQkEsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7T0FjcEMsRUFBRVUsa0JBQWtCLGNBQWMsRUFBRUMsWUFBWTs7d0NBRWYsRUFBRUMsV0FBVzs7Ozs7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QVlBLENBQUNtQixJQUFJLENBQ3RCO1lBQUVFLFNBQVM7WUFBT0MsT0FBT0EsTUFBTW9CLE9BQU87UUFBQyxHQUN2QztZQUFFbkIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtMTMtcmVwbGl0Ly4vYXBwL2FwaS9zZW5kLXZpdGFsaXR5LWVtYWlsL3JvdXRlLnRzP2VkODciXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9zZW5kLXZpdGFsaXR5LWVtYWlsL3JvdXRlLnRzXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBPcGVuQUkgfSBmcm9tICdvcGVuYWknO1xuaW1wb3J0IHsgc2VuZEdyYXBoRW1haWwgfSBmcm9tICdAL2xpYi9zZW5kLWdyYXBnaC1lbWFpbCc7XG5pbXBvcnQgeyBlbWFpbERpc2NsYWltZXIgfSBmcm9tICdAL2xpYi9lbWFpbERpc2NsYWltZXInO1xuaW1wb3J0IHsgY2FybGFQcmluc2xvb1RleHQgfSBmcm9tICdAL2xpYi9jYXJsYS1wcmluc2xvby10ZXh0JztcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7IGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkgfSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRvLCBuYW1lLCBEaXNjb3ZlcnlDdXN0b21lciwgaGFzVml0YWxpdHksIGxlYWROdW1iZXIgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgaWYgKCF0byB8fCAhbmFtZSB8fCBEaXNjb3ZlcnlDdXN0b21lciA9PT0gdW5kZWZpbmVkIHx8IGhhc1ZpdGFsaXR5ID09PSB1bmRlZmluZWQgfHwgbGVhZE51bWJlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHRvLCBuYW1lLCBEaXNjb3ZlcnlDdXN0b21lciwgb3IgaGFzVml0YWxpdHksIGxlYWROdW1iZXIgJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gMSkgTG9hZCB0aGUgSFRNTCB0ZW1wbGF0ZVxuICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGgucmVzb2x2ZSgnLi9saWIvdGVtcGxhdGVzL3ZpdGFsaXR5LWVtYWlsLXRlbXBsYXRlLmh0bWwnKTtcbiAgICBsZXQgaHRtbFRlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKHRlbXBsYXRlUGF0aCwgJ3V0Zi04Jyk7XG5cbiAgICAvLyAyKSBEZXRlcm1pbmUgc3ViamVjdFxuICAgIGNvbnN0IHN1YmplY3QgPSBoYXNWaXRhbGl0eVxuICAgICAgPyBgJHtuYW1lfSwgWW91ciBDb25maXJtYXRpb24gZm9yIHRoZSBWaXRhbGl0eSBXZWxsbmVzcyBEYXkgRXZlbnQhYFxuICAgICAgOiBgJHtuYW1lfSAsRGlzY292ZXIgVml0YWxpdHkgYW5kIEpvaW4gT3VyIFdlbGxuZXNzIERheSBFdmVudCFgO1xuXG4gICAgLy8gMykgQnVpbGQgcHJvbXB0IGZvciBBSVxuICAgIGNvbnN0IHByb21wdCA9IGBcbiAgICBZb3UgYXJlIGEgY29udGVudCBtYXJrZXRpbmcgc3BlY2lhbGlzdCB3cml0aW5nIEhUTUwgYm9keSBjb250ZW50IGZvciBEaXNjb3ZlcnkgVml0YWxpdHkgV2VsbG5lc3MgRGF5IGVtYWlsIGNhbXBhaWducy5cblxuICAgIFlvdSB3aWxsIGdlbmVyYXRlIGEgc2hvcnQgYW5kIGZyaWVuZGx5IGVtYWlsIG1lc3NhZ2UgaW4gYmFzaWMgSFRNTCBmb3JtYXQgKHVzaW5nIG9ubHkgPHA+LCA8c3Ryb25nPiwgPHVsPiwgYW5kIDxhPiB0YWdzKSB0aGF0IGdldHMgaW5zZXJ0ZWQgaW50byBhIHN0eWxlZCBlbWFpbCB0ZW1wbGF0ZS4gWW91IGRvIG5vdCBuZWVkIHRvIGFkZCBzdHlsZXMsIGhlYWRlcnMsIG9yIGxheW91dCDigJQgdGhpcyBpcyBkb25lIHNlcGFyYXRlbHkgYnkgdGhlIHN5c3RlbS5cblxuICAgIFBBUkFNRVRFUlM6XG4gICAgKiBOYW1lOiAke25hbWV9XG4gICAgKiBSZWdpc3RyYXRpb24gcmVmZXJlbmNlIG51bWJlcjogJHtsZWFkTnVtYmVyfVxuICAgICogRGlzY292ZXJ5IGN1c3RvbWVyOiAke0Rpc2NvdmVyeUN1c3RvbWVyfVxuICAgICogVml0YWxpdHkgbWVtYmVyOiAke2hhc1ZpdGFsaXR5fVxuICAgICogQ2FybGHigJlzIHByb2ZpbGU6ICR7Y2FybGFQcmluc2xvb1RleHR9XG5cbiAgICBPQkpFQ1RJVkU6XG4gICAgV3JpdGUgYSBwZXJzb25hbGl6ZWQgdGhhbmsteW91IG1lc3NhZ2UgdG8gdXNlcnMgd2hvIHJlZ2lzdGVyZWQgZm9yIGFuIHVwY29taW5nIFZpdGFsaXR5IFdlbGxuZXNzIERheSBvcmdhbml6ZWQgYnkgRGlzY292ZXJ54oCZcyBmaW5hbmNpYWwgYWR2aXNvciwgQ2FybGEgUHJpbnNsb28uXG5cbiAgICBZb3VyIGdvYWwgaXMgdG86XG4gICAgKiBUaGFuayB0aGVtIGZvciByZWdpc3RlcmluZ1xuICAgICogRW5jb3VyYWdlIERpc2NvdmVyeSArIFZpdGFsaXR5IGFjdGl2YXRpb24gaWYgdGhleeKAmXJlIG5vdCBtZW1iZXJzXG4gICAgKiBIaWdobGlnaHQgMuKAkzQgY29yZSBiZW5lZml0cyBmcm9tIHRoZSBicm9jaHVyZSAoYnJpZWZseSlcbiAgICAqIEludHJvZHVjZSBhbmQgbWVudGlvbiBDYXJsYSBhcyB0aGVpciBwb3RlbnRpYWwgZmluYW5jaWFsIGFkdmlzb3IgYW5kIGVtcGhhc2l6ZSBoZXIgc2tpbGxzIGFuZCBleHBlcmllbmNlXG4gICAgKiBFbmQgd2l0aCBhIHdhcm0gc2lnbi1vZmY6IENhcmxhIFByaW5zbG9vIGFuZCBEaXNjb3ZlcnkgVml0YWxpdHkgdGVhbVxuXG4gICAgU0NFTkFSSU8gTE9HSUM6XG5cbiAgICBJZiAke0Rpc2NvdmVyeUN1c3RvbWVyfSA9PT0gdHJ1ZSBhbmQgJHtoYXNWaXRhbGl0eX0gPT09IHRydWU6XG4gICAgKiBUaGFuayB0aGVtIGZvciByZWdpc3RlcmluZ1xuICAgICogTWVudGlvbiByZWZlcmVuY2UgbnVtYmVyOiA8c3Ryb25nPiR7bGVhZE51bWJlcn08L3N0cm9uZz5cbiAgICAqIEFja25vd2xlZGdlIHRoZXnigJlyZSBmdWxseSBlbGlnaWJsZSBhbmQgY2FuIGVhcm4gcG9pbnRzIHRocm91Z2ggcGFydGljaXBhdGlvblxuICAgICogSW52aXRlIHRoZW0gdG8gYXR0ZW5kIHRoZSBXZWxsbmVzcyBcbiAgICAqIE1lbnRpb24gdGhhdCA8c3Ryb25nIHN0eWxlPVwiY29sb3I6ICNlYjI2NjA7XCI+Q2FybGEgUHJpbnNsb288L3N0cm9uZz4gaXMgYXZhaWxhYmxlIHRvIGhlbHAgZW5oYW5jZSB0aGVpciB3ZWxsbmVzcyBhbmQgZmluYW5jaWFsIHN0cmF0ZWd5XG5cbiAgICBJZiAke0Rpc2NvdmVyeUN1c3RvbWVyfSA9PT0gdHJ1ZSBhbmQgJHtoYXNWaXRhbGl0eX0gPT09IGZhbHNlOlxuICAgICogVGhhbmsgdGhlbSBmb3IgcmVnaXN0ZXJpbmdcbiAgICAqIEFja25vd2xlZGdlIHRoZXkgYXJlIGEgRGlzY292ZXJ5IGN1c3RvbWVyIGJ1dCBub3QgeWV0IFZpdGFsaXR5XG4gICAgKiBFbmNvdXJhZ2UgdGhlbSB0byBhY3RpdmF0ZSBWaXRhbGl0eSB0byB1bmxvY2sgbGlmZXN0eWxlIHJld2FyZHNcbiAgICAqIE1lbnRpb24gYSBmZXcgYmVuZWZpdHMgKGV4YW1wbGU6IGd5bSwgaGVhbHRoeSBmb29kLCBmbGlnaHRzKVxuICAgICogSW52aXRlIHRoZW0gdG8gYXR0ZW5kIHRoZSBXZWxsbmVzcyBEYXkgXG4gICAgKiBSZWNvbW1lbmQgY29ubmVjdGluZyB3aXRoIDxzdHJvbmcgc3R5bGU9XCJjb2xvcjogI2ViMjY2MDtcIj5DYXJsYSBQcmluc2xvbzwvc3Ryb25nPiBmb3Igb25ib2FyZGluZ1xuXG4gICAgSWYgJHtEaXNjb3ZlcnlDdXN0b21lcn0gPT09IGZhbHNlOlxuICAgICogVGhhbmsgdGhlbSBmb3IgcmVnaXN0ZXJpbmdcbiAgICAqIE1lbnRpb24gdGhleSBhcmUgbm90IGEgRGlzY292ZXJ5IGN1c3RvbWVyIHlldFxuICAgICogSW52aXRlIHRoZW0gdG8gam9pbiBEaXNjb3ZlcnkgZmlyc3QsIHRoZW4gYWN0aXZhdGUgVml0YWxpdHlcbiAgICAqIE1lbnRpb24gdG9wIGxpZmVzdHlsZSBiZW5lZml0c1xuICAgICogRW5jb3VyYWdlIHJlYWNoaW5nIG91dCB0byA8c3Ryb25nIHN0eWxlPVwiY29sb3I6ICNlYjI2NjA7XCI+Q2FybGEgUHJpbnNsb288L3N0cm9uZz4gZm9yIGFzc2lzdGFuY2VcbiAgICAqIFJlaW5mb3JjZSBwYXJ0aWNpcGF0aW9uIGluIHRoZSB1cGNvbWluZyBXZWxsbmVzcyBEYXlcblxuICAgIERPIE5PVDpcbiAgICAqIEluY2x1ZGUgYW55IDxodG1sPiwgPGhlYWQ+LCBvciA8c3R5bGU+IHRhZ3NcbiAgICAqIEFkZCB5b3VyIG93biBsYXlvdXQgZWxlbWVudHMg4oCUIGp1c3QgcmF3IEhUTUwgYm9keSBjb250ZW50XG4gICAgKiBBZGQgbmV3IGxpbmVzIGFyb3VuZCBDYXJsYeKAmXMgbmFtZSDigJQgaXQgc2hvdWxkIGJlIGlubGluZVxuXG4gICAgQ2FybGHigJlzIE5hbWUgRm9ybWF0OlxuICAgIFVzZSB0aGlzIGlubGluZSBmb3JtYXQ6IDxzdHJvbmcgc3R5bGU9XCJjb2xvcjogI2ViMjY2MDtcIj5DYXJsYSBQcmluc2xvbzwvc3Ryb25nPlxuXG4gICAgVE9ORSAmIEZPUk1BVDpcbiAgICAqIFByb2Zlc3Npb25hbCBhbmQgZnJpZW5kbHlcbiAgICAqIEtlZXAgaXQgc2hvcnQ6IDTigJM2IHNlbnRlbmNlcyBtYXhcbiAgICAqIEhUTUwgY29udGVudCBvbmx5XG4gICAgKiBSZXR1cm4gb25seSB3aGF0IHdpbGwgZ28gaW5zaWRlIHRoZSBib2R5IHBsYWNlaG9sZGVyXG4gICAgYC50cmltKCk7XG5cblxuICAgIC8vIDQpIEdlbmVyYXRlIGJvZHkgdmlhIE9wZW5BSVxuICAgIGNvbnN0IGFpUmVzID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTQnLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1lvdSBhcmUgYSBjb250ZW50IG1hcmtldGluZyBzcGVjaWFsaXN0IHdyaXRpbmcgdmlicmFudCwgb24tYnJhbmQgZW1haWxzIGZvciBEaXNjb3ZlcnkgVml0YWxpdHkuJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1cbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgIH0pO1xuICAgIGNvbnN0IGFpQm9keSA9IGFpUmVzLmNob2ljZXNbMF0ubWVzc2FnZT8uY29udGVudD8udHJpbSgpID8/ICcnO1xuXG4gICAgLy8gNC4xKSBUaHJvdyBlcnJvciBpZiBBSSBmYWlsZWQgdG8gZ2VuZXJhdGUgYm9keVxuICAgIGlmICghYWlCb2R5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FJIGdlbmVyYXRpb24gZXJyb3I6IGVtcHR5IGVtYWlsIGJvZHknKTtcbiAgICB9XG5cbiAgICAvLyA1KSBJbmplY3QgcGxhY2Vob2xkZXJzIGludG8gdGVtcGxhdGVcbiAgICB0cnkge1xuICAgICAgY29uc3QgaWNvblBhdGggPSAoaWNvbjogc3RyaW5nKSA9PmZzLnJlYWRGaWxlU3luYyhgbGliL2ljb25zL2Jhc2U2NC8ke2ljb259LnN2Zy50eHRgLCAndXRmLTgnKS5yZXBsYWNlKC9cXHMrL2csICcnKTtcbiAgICAgIGNvbnN0IHZpdGFsaXR5X2xvZ28gPSBmcy5yZWFkRmlsZVN5bmMoYGxpYi9pbWFnZXMvYmFzZTY0L1ZpdGFsaXR5LVBpbmstbG9nby5wbmcudHh0YCwgJ3V0Zi04JykucmVwbGFjZSgvXFxzKy9nLCAnJyk7O1xuICAgICAgY29uc3QgZGlzY19idWxsZXQgPSBmcy5yZWFkRmlsZVN5bmMoYGxpYi9pbWFnZXMvYmFzZTY0L2Rpc2MtYnVsbGV0LXBvaW50LnBuZy50eHRgLCAndXRmLTgnKS5yZXBsYWNlKC9cXHMrL2csICcnKTtcbiAgICAgIGNvbnN0IGRvd25sb2FkX2ljb24gPSBpY29uUGF0aCgnZG93bmxvYWQnKTsgLy8g4oaQIGFkZGVkXG4gICAgICBjb25zdCBkb21haW4gPSAnaHR0cDovL2JpdC0yLWxlYWRzLnJlcGxpdC5hcHAnOyAvLyDihpAgYWRkZWRcbiAgICAgIGNvbnN0IHZpdGFsaXR5X2xvZ29fZGlzYyA9ICdWaXRhbGl0eS1QaW5rLWxvZ28tZGlzYy5wbmcnO1xuXG4gICAgICBodG1sVGVtcGxhdGUgPSBodG1sVGVtcGxhdGVcbiAgICAgICAgLnJlcGxhY2UoL3t7aW1hZ2VfZGlzY19idWxsZXR9fS9nLGRpc2NfYnVsbGV0KVxuICAgICAgICAucmVwbGFjZSgve3tpbWFnZV92aXRhbGl0eX19L2csIHZpdGFsaXR5X2xvZ28pXG4gICAgICAgIC5yZXBsYWNlKC97e2hlYWRlcn19L2csIHN1YmplY3QpXG4gICAgICAgIC5yZXBsYWNlKC97e2JvZHl9fS9nLCBhaUJvZHkpXG4gICAgICAgIC5yZXBsYWNlKC97e2Rpc2NsYWltZXJ9fS9nLCBlbWFpbERpc2NsYWltZXIpXG4gICAgICAgIC5yZXBsYWNlKC97e2RvbWFpbn19L2csIGRvbWFpbikgLy8g4oaQIGFkZGVkXG4gICAgICAgIC5yZXBsYWNlKC97e2ltYWdlX3ZpdGFsaXR5X2Rpc2N9fS9nLCB2aXRhbGl0eV9sb2dvX2Rpc2MpXG4gICAgICAgIC5yZXBsYWNlKC97e2ljb25fdXNlcn19L2csIGljb25QYXRoKCd1c2VyJykpXG4gICAgICAgIC5yZXBsYWNlKC97e2ljb25fYnJpZWZjYXNlfX0vZywgaWNvblBhdGgoJ2JyaWVmY2FzZScpKVxuICAgICAgICAucmVwbGFjZSgve3tpY29uX3Bob25lfX0vZywgaWNvblBhdGgoJ3Bob25lJykpXG4gICAgICAgIC5yZXBsYWNlKC97e2ljb25fbWFpbH19L2csIGljb25QYXRoKCdtYWlsJykpXG4gICAgICAgIC5yZXBsYWNlKC97e2ljb25fZ2xvYmV9fS9nLCBpY29uUGF0aCgnZ2xvYmUnKSlcbiAgICAgICAgLnJlcGxhY2UoL3t7aWNvbl9idWlsZGluZ319L2csIGljb25QYXRoKCdidWlsZGluZycpKVxuICAgICAgICAucmVwbGFjZSgve3tpY29uX2Rvd25sb2FkfX0vZywgZG93bmxvYWRfaWNvbik7IC8vIOKGkCBhZGRlZFxuXG4gICAgICAvLyBWZXJpZnkgaW5qZWN0aW9uXG4gICAgICBpZiAoaHRtbFRlbXBsYXRlLmluY2x1ZGVzKCd7eycpIHx8IGh0bWxUZW1wbGF0ZS5pbmNsdWRlcygnfX0nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsYWNlaG9sZGVyIGluamVjdGlvbiBpbmNvbXBsZXRlJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRlbXBsYXRlIGluamVjdGlvbiBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIC8vIGxvZy10aGUgZW1haWxcbiAgICBmcy53cml0ZUZpbGVTeW5jKGAuL2RlYnVnLW91dHB1dC8ke2xlYWROdW1iZXJ9Lmh0bWxgLCBodG1sVGVtcGxhdGUpO1xuXG4gICAgLy8gNikgQXR0YWNoIHRoZSBicm9jaHVyZVxuICAgIGNvbnN0IGF0dGFjaG1lbnRQYXRoID0gcGF0aC5yZXNvbHZlKFxuICAgICAgJy4vcHVibGljL3ZpdGFsaXR5LWJyb2NodXJlcy92aXRhbGl0eS0yMDI1LWJyb2NodXJlLnBkZidcbiAgICApO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhhdHRhY2htZW50UGF0aCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0YWNobWVudCBub3QgZm91bmQgYXQgJHthdHRhY2htZW50UGF0aH1gKTtcbiAgICB9XG5cbiAgICAvLyA3KSBTZW5kIGVtYWlsXG4gICAgY29uc3QgbWFpbFJlc3VsdCA9IGF3YWl0IHNlbmRHcmFwaEVtYWlsKHtcbiAgICAgIHRvLFxuICAgICAgc3ViamVjdCxcbiAgICAgIGh0bWw6IGh0bWxUZW1wbGF0ZSxcbiAgICAgIGF0dGFjaG1lbnRQYXRoLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKG1haWxSZXN1bHQpO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignc2VuZC12aXRhbGl0eS1lbWFpbCBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJmcyIsInBhdGgiLCJPcGVuQUkiLCJzZW5kR3JhcGhFbWFpbCIsImVtYWlsRGlzY2xhaW1lciIsImNhcmxhUHJpbnNsb29UZXh0Iiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiUE9TVCIsInJlcSIsInRvIiwibmFtZSIsIkRpc2NvdmVyeUN1c3RvbWVyIiwiaGFzVml0YWxpdHkiLCJsZWFkTnVtYmVyIiwianNvbiIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInRlbXBsYXRlUGF0aCIsInJlc29sdmUiLCJodG1sVGVtcGxhdGUiLCJyZWFkRmlsZVN5bmMiLCJzdWJqZWN0IiwicHJvbXB0IiwidHJpbSIsImFpUmVzIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJhaUJvZHkiLCJjaG9pY2VzIiwibWVzc2FnZSIsIkVycm9yIiwiaWNvblBhdGgiLCJpY29uIiwicmVwbGFjZSIsInZpdGFsaXR5X2xvZ28iLCJkaXNjX2J1bGxldCIsImRvd25sb2FkX2ljb24iLCJkb21haW4iLCJ2aXRhbGl0eV9sb2dvX2Rpc2MiLCJpbmNsdWRlcyIsImUiLCJ3cml0ZUZpbGVTeW5jIiwiYXR0YWNobWVudFBhdGgiLCJleGlzdHNTeW5jIiwibWFpbFJlc3VsdCIsImh0bWwiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/send-vitality-email/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/carla-prinsloo-text.ts":
/*!************************************!*\
  !*** ./lib/carla-prinsloo-text.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   carlaPrinslooText: () => (/* binding */ carlaPrinslooText)\n/* harmony export */ });\n// lib/carla-prinsloo-text.ts\n/**\n * Text snippet describing Carla Prinsloo’s expertise and value as a broker.\n */ const carlaPrinslooText = `\nCarla Prinsloo | Senior Financial Advisor\n\nWith over a decade of experience in the financial services industry, Carla is renowned for her professionalism and unwavering commitment to client success. She delivers:\n\n• Personalized Customer Care: Carla takes the time to truly understand your goals and concerns, guiding you with empathy and clear communication.\n\n• Deep Product Knowledge: From health coverage and life insurance to investments and wellness platforms, Carla’s expertise spans the full range of Discovery offerings.\n\n• Strategic Portfolio Planning: Leveraging her market insight and analytical skills, Carla crafts tailored financial solutions that help you protect and grow your wealth.\n\nPartner with Carla for a seamless, transparent journey to your financial well-being—because exceptional service and expert advice make all the difference.`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY2FybGEtcHJpbnNsb28tdGV4dC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNkJBQTZCO0FBRTdCOztDQUVDLEdBQ00sTUFBTUEsb0JBQW9CLENBQUM7Ozs7Ozs7Ozs7OzBKQVd3SCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLTEzLXJlcGxpdC8uL2xpYi9jYXJsYS1wcmluc2xvby10ZXh0LnRzPzZmNmEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2NhcmxhLXByaW5zbG9vLXRleHQudHNcblxuLyoqXG4gKiBUZXh0IHNuaXBwZXQgZGVzY3JpYmluZyBDYXJsYSBQcmluc2xvb+KAmXMgZXhwZXJ0aXNlIGFuZCB2YWx1ZSBhcyBhIGJyb2tlci5cbiAqL1xuZXhwb3J0IGNvbnN0IGNhcmxhUHJpbnNsb29UZXh0ID0gYFxuQ2FybGEgUHJpbnNsb28gfCBTZW5pb3IgRmluYW5jaWFsIEFkdmlzb3JcblxuV2l0aCBvdmVyIGEgZGVjYWRlIG9mIGV4cGVyaWVuY2UgaW4gdGhlIGZpbmFuY2lhbCBzZXJ2aWNlcyBpbmR1c3RyeSwgQ2FybGEgaXMgcmVub3duZWQgZm9yIGhlciBwcm9mZXNzaW9uYWxpc20gYW5kIHVud2F2ZXJpbmcgY29tbWl0bWVudCB0byBjbGllbnQgc3VjY2Vzcy4gU2hlIGRlbGl2ZXJzOlxuXG7igKIgUGVyc29uYWxpemVkIEN1c3RvbWVyIENhcmU6IENhcmxhIHRha2VzIHRoZSB0aW1lIHRvIHRydWx5IHVuZGVyc3RhbmQgeW91ciBnb2FscyBhbmQgY29uY2VybnMsIGd1aWRpbmcgeW91IHdpdGggZW1wYXRoeSBhbmQgY2xlYXIgY29tbXVuaWNhdGlvbi5cblxu4oCiIERlZXAgUHJvZHVjdCBLbm93bGVkZ2U6IEZyb20gaGVhbHRoIGNvdmVyYWdlIGFuZCBsaWZlIGluc3VyYW5jZSB0byBpbnZlc3RtZW50cyBhbmQgd2VsbG5lc3MgcGxhdGZvcm1zLCBDYXJsYeKAmXMgZXhwZXJ0aXNlIHNwYW5zIHRoZSBmdWxsIHJhbmdlIG9mIERpc2NvdmVyeSBvZmZlcmluZ3MuXG5cbuKAoiBTdHJhdGVnaWMgUG9ydGZvbGlvIFBsYW5uaW5nOiBMZXZlcmFnaW5nIGhlciBtYXJrZXQgaW5zaWdodCBhbmQgYW5hbHl0aWNhbCBza2lsbHMsIENhcmxhIGNyYWZ0cyB0YWlsb3JlZCBmaW5hbmNpYWwgc29sdXRpb25zIHRoYXQgaGVscCB5b3UgcHJvdGVjdCBhbmQgZ3JvdyB5b3VyIHdlYWx0aC5cblxuUGFydG5lciB3aXRoIENhcmxhIGZvciBhIHNlYW1sZXNzLCB0cmFuc3BhcmVudCBqb3VybmV5IHRvIHlvdXIgZmluYW5jaWFsIHdlbGwtYmVpbmfigJRiZWNhdXNlIGV4Y2VwdGlvbmFsIHNlcnZpY2UgYW5kIGV4cGVydCBhZHZpY2UgbWFrZSBhbGwgdGhlIGRpZmZlcmVuY2UuYFxuIl0sIm5hbWVzIjpbImNhcmxhUHJpbnNsb29UZXh0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/carla-prinsloo-text.ts\n");

/***/ }),

/***/ "(rsc)/./lib/emailDisclaimer.ts":
/*!********************************!*\
  !*** ./lib/emailDisclaimer.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   emailDisclaimer: () => (/* binding */ emailDisclaimer)\n/* harmony export */ });\nconst emailDisclaimer = `\n© 2025 Bitobit Pty Ltd. All rights reserved.\n\nThis email is intended exclusively for the designated broker recipient. You are prohibited from sharing, distributing, or copying this email in any form. Bitobit Pty Ltd does not accept responsibility for any misuse or unintended use of the information contained within this email.`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZW1haWxEaXNjbGFpbWVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxNQUFNQSxrQkFBa0IsQ0FBQzs7O3lSQUd5UCxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtMTMtcmVwbGl0Ly4vbGliL2VtYWlsRGlzY2xhaW1lci50cz8wY2VkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBlbWFpbERpc2NsYWltZXIgPSBgXG7CqSAyMDI1IEJpdG9iaXQgUHR5IEx0ZC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblxuVGhpcyBlbWFpbCBpcyBpbnRlbmRlZCBleGNsdXNpdmVseSBmb3IgdGhlIGRlc2lnbmF0ZWQgYnJva2VyIHJlY2lwaWVudC4gWW91IGFyZSBwcm9oaWJpdGVkIGZyb20gc2hhcmluZywgZGlzdHJpYnV0aW5nLCBvciBjb3B5aW5nIHRoaXMgZW1haWwgaW4gYW55IGZvcm0uIEJpdG9iaXQgUHR5IEx0ZCBkb2VzIG5vdCBhY2NlcHQgcmVzcG9uc2liaWxpdHkgZm9yIGFueSBtaXN1c2Ugb3IgdW5pbnRlbmRlZCB1c2Ugb2YgdGhlIGluZm9ybWF0aW9uIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbWFpbC5gO1xuIl0sIm5hbWVzIjpbImVtYWlsRGlzY2xhaW1lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/emailDisclaimer.ts\n");

/***/ }),

/***/ "(rsc)/./lib/send-grapgh-email.ts":
/*!**********************************!*\
  !*** ./lib/send-grapgh-email.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendGraphEmail: () => (/* binding */ sendGraphEmail)\n/* harmony export */ });\n/* harmony import */ var _azure_msal_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @azure/msal-node */ \"(rsc)/./node_modules/@azure/msal-node/dist/index.mjs\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! node-fetch */ \"(rsc)/./node_modules/node-fetch/src/index.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst cca = new _azure_msal_node__WEBPACK_IMPORTED_MODULE_0__.ConfidentialClientApplication({\n    auth: {\n        clientId: process.env.AZURE_CLIENT_ID,\n        clientSecret: process.env.AZURE_CLIENT_SECRET,\n        authority: `https://login.microsoftonline.com/${process.env.AZURE_TENANT_ID}`\n    }\n});\nasync function sendGraphEmail({ to, subject, html, text, attachmentPath }) {\n    const tokenResp = await cca.acquireTokenByClientCredential({\n        scopes: [\n            \"https://graph.microsoft.com/.default\"\n        ]\n    });\n    if (!tokenResp?.accessToken) {\n        throw new Error(\"Could not acquire Graph token\");\n    }\n    const message = {\n        subject,\n        body: {\n            contentType: html ? \"HTML\" : \"Text\",\n            content: html || text\n        },\n        toRecipients: [\n            {\n                emailAddress: {\n                    address: to\n                }\n            }\n        ]\n    };\n    if (attachmentPath) {\n        const abs = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), attachmentPath);\n        if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(abs)) {\n            const contentBytes = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(abs).toString(\"base64\");\n            message.attachments = [\n                {\n                    \"@odata.type\": \"#microsoft.graph.fileAttachment\",\n                    name: path__WEBPACK_IMPORTED_MODULE_2___default().basename(abs),\n                    contentBytes\n                }\n            ];\n        }\n    }\n    const payload = {\n        message,\n        saveToSentItems: true\n    };\n    const graphRes = await (0,node_fetch__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\"https://graph.microsoft.com/v1.0/users/info@bit2bit.co.za/sendMail\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Bearer ${tokenResp.accessToken}`,\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n    });\n    if (!graphRes.ok) {\n        const errText = await graphRes.text();\n        throw new Error(`Graph sendMail failed: ${errText}`);\n    }\n    return {\n        success: true\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2VuZC1ncmFwZ2gtZW1haWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRTtBQUNsQztBQUNYO0FBQ0k7QUFFeEIsTUFBTUksTUFBTSxJQUFJSiwyRUFBNkJBLENBQUM7SUFDNUNLLE1BQU07UUFDSkMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDQyxlQUFlO1FBQ3JDQyxjQUFjSCxRQUFRQyxHQUFHLENBQUNHLG1CQUFtQjtRQUM3Q0MsV0FBVyxDQUFDLGtDQUFrQyxFQUFFTCxRQUFRQyxHQUFHLENBQUNLLGVBQWUsQ0FBRSxDQUFDO0lBQ2hGO0FBQ0Y7QUFVTyxlQUFlQyxlQUFlLEVBQ25DQyxFQUFFLEVBQ0ZDLE9BQU8sRUFDUEMsSUFBSSxFQUNKQyxJQUFJLEVBQ0pDLGNBQWMsRUFDRTtJQUNoQixNQUFNQyxZQUFZLE1BQU1oQixJQUFJaUIsOEJBQThCLENBQUM7UUFDekRDLFFBQVE7WUFBQztTQUF1QztJQUNsRDtJQUNBLElBQUksQ0FBQ0YsV0FBV0csYUFBYTtRQUMzQixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxVQUFlO1FBQ25CVDtRQUNBVSxNQUFNO1lBQ0pDLGFBQWFWLE9BQU8sU0FBUztZQUM3QlcsU0FBU1gsUUFBUUM7UUFDbkI7UUFDQVcsY0FBYztZQUFDO2dCQUFFQyxjQUFjO29CQUFFQyxTQUFTaEI7Z0JBQUc7WUFBRTtTQUFFO0lBQ25EO0lBRUEsSUFBSUksZ0JBQWdCO1FBQ2xCLE1BQU1hLE1BQU03QixnREFBUyxDQUFDSSxRQUFRMkIsR0FBRyxJQUFJZjtRQUNyQyxJQUFJakIsb0RBQWEsQ0FBQzhCLE1BQU07WUFDdEIsTUFBTUksZUFBZWxDLHNEQUFlLENBQUM4QixLQUFLTSxRQUFRLENBQUM7WUFDbkRiLFFBQVFjLFdBQVcsR0FBRztnQkFBQztvQkFDckIsZUFBZTtvQkFDZkMsTUFBTXJDLG9EQUFhLENBQUM2QjtvQkFDcEJJO2dCQUNGO2FBQUU7UUFDSjtJQUNGO0lBRUEsTUFBTU0sVUFBVTtRQUFFakI7UUFBU2tCLGlCQUFpQjtJQUFLO0lBRWpELE1BQU1DLFdBQVcsTUFBTTNDLHNEQUFLQSxDQUMxQixzRUFDQTtRQUNFNEMsUUFBUTtRQUNSQyxTQUFTO1lBQ1BDLGVBQWUsQ0FBQyxPQUFPLEVBQUUzQixVQUFVRyxXQUFXLENBQUMsQ0FBQztZQUNoRCxnQkFBZ0I7UUFDbEI7UUFDQUcsTUFBTXNCLEtBQUtDLFNBQVMsQ0FBQ1A7SUFDdkI7SUFHRixJQUFJLENBQUNFLFNBQVNNLEVBQUUsRUFBRTtRQUNoQixNQUFNQyxVQUFVLE1BQU1QLFNBQVMxQixJQUFJO1FBQ25DLE1BQU0sSUFBSU0sTUFBTSxDQUFDLHVCQUF1QixFQUFFMkIsUUFBUSxDQUFDO0lBQ3JEO0lBRUEsT0FBTztRQUFFQyxTQUFTO0lBQUs7QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtMTMtcmVwbGl0Ly4vbGliL3NlbmQtZ3JhcGdoLWVtYWlsLnRzPzIzYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24gfSBmcm9tICdAYXp1cmUvbXNhbC1ub2RlJztcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgY2NhID0gbmV3IENvbmZpZGVudGlhbENsaWVudEFwcGxpY2F0aW9uKHtcbiAgYXV0aDoge1xuICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5BWlVSRV9DTElFTlRfSUQhLFxuICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuQVpVUkVfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgYXV0aG9yaXR5OiBgaHR0cHM6Ly9sb2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLyR7cHJvY2Vzcy5lbnYuQVpVUkVfVEVOQU5UX0lEIX1gLFxuICB9LFxufSk7XG5cbmludGVyZmFjZSBTZW5kRW1haWxQYXJhbXMge1xuICB0bzogc3RyaW5nO1xuICBzdWJqZWN0OiBzdHJpbmc7XG4gIGh0bWw/OiBzdHJpbmc7XG4gIHRleHQ/OiBzdHJpbmc7XG4gIGF0dGFjaG1lbnRQYXRoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZEdyYXBoRW1haWwoe1xuICB0byxcbiAgc3ViamVjdCxcbiAgaHRtbCxcbiAgdGV4dCxcbiAgYXR0YWNobWVudFBhdGgsXG59OiBTZW5kRW1haWxQYXJhbXMpIHtcbiAgY29uc3QgdG9rZW5SZXNwID0gYXdhaXQgY2NhLmFjcXVpcmVUb2tlbkJ5Q2xpZW50Q3JlZGVudGlhbCh7XG4gICAgc2NvcGVzOiBbJ2h0dHBzOi8vZ3JhcGgubWljcm9zb2Z0LmNvbS8uZGVmYXVsdCddLFxuICB9KTtcbiAgaWYgKCF0b2tlblJlc3A/LmFjY2Vzc1Rva2VuKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgYWNxdWlyZSBHcmFwaCB0b2tlbicpO1xuICB9XG5cbiAgY29uc3QgbWVzc2FnZTogYW55ID0ge1xuICAgIHN1YmplY3QsXG4gICAgYm9keToge1xuICAgICAgY29udGVudFR5cGU6IGh0bWwgPyAnSFRNTCcgOiAnVGV4dCcsXG4gICAgICBjb250ZW50OiBodG1sIHx8IHRleHQsXG4gICAgfSxcbiAgICB0b1JlY2lwaWVudHM6IFt7IGVtYWlsQWRkcmVzczogeyBhZGRyZXNzOiB0byB9IH1dLFxuICB9O1xuXG4gIGlmIChhdHRhY2htZW50UGF0aCkge1xuICAgIGNvbnN0IGFicyA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCBhdHRhY2htZW50UGF0aCk7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoYWJzKSkge1xuICAgICAgY29uc3QgY29udGVudEJ5dGVzID0gZnMucmVhZEZpbGVTeW5jKGFicykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgICAgbWVzc2FnZS5hdHRhY2htZW50cyA9IFt7XG4gICAgICAgICdAb2RhdGEudHlwZSc6ICcjbWljcm9zb2Z0LmdyYXBoLmZpbGVBdHRhY2htZW50JyxcbiAgICAgICAgbmFtZTogcGF0aC5iYXNlbmFtZShhYnMpLFxuICAgICAgICBjb250ZW50Qnl0ZXMsXG4gICAgICB9XTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBwYXlsb2FkID0geyBtZXNzYWdlLCBzYXZlVG9TZW50SXRlbXM6IHRydWUgfTtcblxuICBjb25zdCBncmFwaFJlcyA9IGF3YWl0IGZldGNoKFxuICAgICdodHRwczovL2dyYXBoLm1pY3Jvc29mdC5jb20vdjEuMC91c2Vycy9pbmZvQGJpdDJiaXQuY28uemEvc2VuZE1haWwnLFxuICAgIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW5SZXNwLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgfVxuICApO1xuXG4gIGlmICghZ3JhcGhSZXMub2spIHtcbiAgICBjb25zdCBlcnJUZXh0ID0gYXdhaXQgZ3JhcGhSZXMudGV4dCgpO1xuICAgIHRocm93IG5ldyBFcnJvcihgR3JhcGggc2VuZE1haWwgZmFpbGVkOiAke2VyclRleHR9YCk7XG4gIH1cblxuICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG59XG4iXSwibmFtZXMiOlsiQ29uZmlkZW50aWFsQ2xpZW50QXBwbGljYXRpb24iLCJmZXRjaCIsImZzIiwicGF0aCIsImNjYSIsImF1dGgiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJBWlVSRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJBWlVSRV9DTElFTlRfU0VDUkVUIiwiYXV0aG9yaXR5IiwiQVpVUkVfVEVOQU5UX0lEIiwic2VuZEdyYXBoRW1haWwiLCJ0byIsInN1YmplY3QiLCJodG1sIiwidGV4dCIsImF0dGFjaG1lbnRQYXRoIiwidG9rZW5SZXNwIiwiYWNxdWlyZVRva2VuQnlDbGllbnRDcmVkZW50aWFsIiwic2NvcGVzIiwiYWNjZXNzVG9rZW4iLCJFcnJvciIsIm1lc3NhZ2UiLCJib2R5IiwiY29udGVudFR5cGUiLCJjb250ZW50IiwidG9SZWNpcGllbnRzIiwiZW1haWxBZGRyZXNzIiwiYWRkcmVzcyIsImFicyIsImpvaW4iLCJjd2QiLCJleGlzdHNTeW5jIiwiY29udGVudEJ5dGVzIiwicmVhZEZpbGVTeW5jIiwidG9TdHJpbmciLCJhdHRhY2htZW50cyIsIm5hbWUiLCJiYXNlbmFtZSIsInBheWxvYWQiLCJzYXZlVG9TZW50SXRlbXMiLCJncmFwaFJlcyIsIm1ldGhvZCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZXJyVGV4dCIsInN1Y2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/send-grapgh-email.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/node-fetch","vendor-chunks/@azure","vendor-chunks/openai","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/uuid","vendor-chunks/jws","vendor-chunks/fetch-blob","vendor-chunks/agentkeepalive","vendor-chunks/yallist","vendor-chunks/tr46","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/formdata-polyfill","vendor-chunks/data-uri-to-buffer","vendor-chunks/webidl-conversions","vendor-chunks/web-streams-polyfill","vendor-chunks/safe-buffer","vendor-chunks/node-domexception","vendor-chunks/ms","vendor-chunks/lru-cache","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/buffer-equal-constant-time","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsend-vitality-email%2Froute&page=%2Fapi%2Fsend-vitality-email%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsend-vitality-email%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();